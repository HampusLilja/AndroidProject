

<html xmlns="http://www.w3.org/1999/xhtml"
       xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:sql="http://java.sun.com/jsp/jstl/sql" >
    <sql:setDataSource var="USERS" driver="org.apache.derby.jdbc.ClientDriver"
url="jdbc:derby://localhost:1527/SHUTAPPDB" user="gcm" password="gcm"
scope="page"/>
<sql:query dataSource="${USERS}" var="userresult">
SELECT * from USERS
</sql:query>
<sql:setDataSource var="ROOMS" driver="org.apache.derby.jdbc.ClientDriver"
url="jdbc:derby://localhost:1527/SHUTAPPDB" user="gcm" password="gcm"
scope="page"/>
<sql:query dataSource="${ROOMS}" var="chatroomresult">
SELECT * from CHATROOMS
</sql:query>

    <head>
        <link rel="stylesheet" type="text/css" href="CSS/servercss.css"/>
        <title>ShutAPP GCM Server Test Enviroment</title>
 
    </head>
    <body>
    
    <h2>ShutAPP GCM Server Test Environment</h2>
            
        <section>
    <form action="GCM" method="POST">
        <input type="hidden" name="action" value="userMsg" />
        <b>Send message to specific device (DOSE or TOMAS);</b>
        <br />Enter device name:<br/><input type="text" name="UserName" value="" />
        <br/>Enter message: <br/><textarea name="Message" rows="3" cols="60" ></textarea> 
        <br/><input type="submit" name="submit" value="Submit" />
        </form>   
        </section>
    <section>
        <form action="GCM" method="POST">
        <input type="hidden" name="action" value="chatRoomMsg" />
        <b>Multicast message (to all users in chatroom);</b>
        <br />Enter chatroom to send to:<br/><input type="text" name="chatRoom" value="" />
        <br/>Write your message here:<br/><textarea name="Message" rows="3" cols="60" > </textarea> 
        <br/><input type="submit" name="submit" value="Submit" />
        </form>   
    </section>
        <section>
        <form action="GCM" method="POST">
        <input type="hidden" name="action" value="addUserToDB" />
        <b>Add new user to DB</b>
        <br />Enter Nickname: <br/><input type="text" name="DBNICK" value="" />
        <br/>Enter regID: <br/><textarea name="DBREGID" rows="3" cols="60" > </textarea> 
        <br/><input type="submit" name="submit" value="Submit" />
        </form>   
    </section>
            <section>
        <form action="GCM" method="POST">
        <input type="hidden" name="action" value="remUserFromDB" />
        <b>Remove user from DB:</b><br/>This user will be removed from SQL DB.<br></br>
        <br/>Enter regID: <br/><textarea name="DBREGID" rows="3" cols="60" > </textarea> 
        <br/><input type="submit" name="submit" value="Submit" />
        </form>  
    </section>
    <br></br><br></br>
    <footer>Current users:
            <table border="1" width="90%">

                <tr>
   <th>NICK</th>
   <th>REGID</th>
</tr>
<c:forEach var="row" items="${userresult.rows}">
<tr>
   <td><c:out value="${row.NICK}"/></td>
   <td><c:out value="${row.REGID}"/></td>
</tr>
</c:forEach>
</table>
    </footer>
    <br></br>
   <footer>Current chatrooms:
            <table border="1" width="100%">
                
                <tr>
   <th>CHATROOM</th>
   <th>MEMBERS</th>
      <th>LONG</th>
   <th>LAT</th>
   <th>RADIUS</th>
</tr>
<c:forEach var="row1" items="${chatroomresult.rows}">
<tr>
   <td><c:out value="${row1.CHATROOM}"/></td>
   <td><c:out value="${row1.MEMBERS}"/></td>
      <td><c:out value="${row1.LONG}"/></td>
   <td><c:out value="${row1.LAT}"/></td>
      <td><c:out value="${row1.RADIUS}"/></td>
</tr>
</c:forEach>
</table>
    </footer>
    </body>
</html>